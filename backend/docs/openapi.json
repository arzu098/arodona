{
  "openapi": "3.0.0",
  "info": {
    "title": "Arodona Jewelry Backend API",
    "version": "1.0.0",
    "description": "E-commerce API for Arodona Jewelry store"
  },
  "servers": [
    {
      "url": "http://localhost:5858",
      "description": "Development server"
    }
  ],
  "paths": {
    "/api/auth/register": {
      "post": {
        "summary": "Register a new user",
        "tags": ["Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRegister"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User registered successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegisterResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "summary": "Login user",
        "tags": ["Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserLogin"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/profile/me": {
      "get": {
        "summary": "Get current user profile",
        "tags": ["User Profile"],
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "User profile retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/products": {
      "post": {
        "summary": "Create a new product",
        "tags": ["Products"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Product created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductCreateResponse"
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "List all products",
        "tags": ["Products"],
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Products retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/products/{product_id}": {
      "get": {
        "summary": "Get a product by ID",
        "tags": ["Products"],
        "parameters": [
          {
            "name": "product_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Product retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a product",
        "tags": ["Products"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "product_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Product updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductCreateResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a product",
        "tags": ["Products"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "product_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Product deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductDeleteResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/categories": {
      "post": {
        "summary": "Create a new category",
        "tags": ["Categories"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CategoryCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Category created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryOut"
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "List categories",
        "tags": ["Categories"],
        "parameters": [
          {
            "name": "parent_id",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "flat",
            "in": "query",
            "schema": {
              "type": "boolean",
              "default": true
            }
          },
          {
            "name": "skip",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Categories retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryListOut"
                }
              }
            }
          }
        }
      }
    },
    "/api/categories/{category_id}": {
      "get": {
        "summary": "Get a category by ID",
        "tags": ["Categories"],
        "parameters": [
          {
            "name": "category_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "include_product_count",
            "in": "query",
            "schema": {
              "type": "boolean",
              "default": false
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Category retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryOut"
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a category",
        "tags": ["Categories"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "category_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CategoryUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Category updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryOut"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a category",
        "tags": ["Categories"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "category_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "force",
            "in": "query",
            "schema": {
              "type": "boolean",
              "default": false
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Category deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "category_id": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/reviews": {
      "post": {
        "summary": "Create a new review",
        "tags": ["Reviews"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReviewCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Review created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/reviews/product/{product_id_or_slug}": {
      "get": {
        "summary": "Get reviews for a product",
        "tags": ["Reviews"],
        "parameters": [
          {
            "name": "product_id_or_slug",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sort",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["newest", "oldest", "rating_desc", "rating_asc", "helpful"],
              "default": "newest"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "name": "approved_only",
            "in": "query",
            "schema": {
              "type": "boolean",
              "default": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Reviews retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/reviews/{review_id}": {
      "get": {
        "summary": "Get a review by ID",
        "tags": ["Reviews"],
        "parameters": [
          {
            "name": "review_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Review retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a review",
        "tags": ["Reviews"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "review_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReviewUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Review updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a review",
        "tags": ["Reviews"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "review_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Review deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "review_id": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/reviews/{review_id}/helpful": {
      "post": {
        "summary": "Mark review as helpful",
        "tags": ["Reviews"],
        "parameters": [
          {
            "name": "review_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReviewHelpfulRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Helpful count updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/favorites/toggle": {
      "post": {
        "summary": "Toggle favorite for a product",
        "tags": ["Favorites"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FavoriteToggleRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Favorite toggled",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FavoriteToggleResponse"
                }
              }
            }
          },
          "201": {
            "description": "Favorite added",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FavoriteToggleResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/favorites": {
      "get": {
        "summary": "List user favorites",
        "tags": ["Favorites"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Favorites retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FavoriteListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/favorites/check/{product_id_or_slug}": {
      "get": {
        "summary": "Check if product is favorited",
        "tags": ["Favorites"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "product_id_or_slug",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Favorite status checked",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FavoriteCheckResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/favorites/{favorite_id}": {
      "delete": {
        "summary": "Remove a favorite",
        "tags": ["Favorites"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "favorite_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Favorite removed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FavoriteRemoveResponse"
                }
              }
            }
          }
        }
      }
    },
    "/cart": {
      "get": {
        "summary": "Get current user's cart",
        "tags": ["Cart"],
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "Cart retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CartOut"
                }
              }
            }
          }
        }
      }
    },
    "/cart/add": {
      "post": {
        "summary": "Add item to cart",
        "tags": ["Cart"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CartItemCreate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Item added to cart",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CartOut"
                }
              }
            }
          }
        }
      }
    },
    "/cart/update": {
      "put": {
        "summary": "Update cart item quantity",
        "tags": ["Cart"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CartItemUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cart item updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CartOut"
                }
              }
            }
          }
        }
      }
    },
    "/cart/remove": {
      "post": {
        "summary": "Remove item from cart",
        "tags": ["Cart"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CartItemRemove"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Item removed from cart",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CartOut"
                }
              }
            }
          }
        }
      }
    },
    "/cart/clear": {
      "post": {
        "summary": "Clear cart",
        "tags": ["Cart"],
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "Cart cleared",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CartOut"
                }
              }
            }
          }
        }
      }
    },
    "/cart/apply-coupon": {
      "post": {
        "summary": "Apply coupon to cart",
        "tags": ["Cart"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CartApplyCoupon"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Coupon applied",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CartOut"
                }
              }
            }
          }
        }
      }
    },
    "/cart/remove-coupon": {
      "post": {
        "summary": "Remove coupon from cart",
        "tags": ["Cart"],
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "Coupon removed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CartOut"
                }
              }
            }
          }
        }
      }
    },
    "/cart/check/{product_id_or_slug}": {
      "get": {
        "summary": "Check if product is in cart",
        "tags": ["Cart"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "product_id_or_slug",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Product cart status checked",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CartCheckResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/orders": {
      "post": {
        "summary": "Create a new order",
        "tags": ["Orders"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OrderCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Order created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderResponse"
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "List user orders",
        "tags": ["Orders"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Orders retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/orders/{order_id}": {
      "get": {
        "summary": "Get an order by ID",
        "tags": ["Orders"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "order_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Order retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update an order",
        "tags": ["Orders"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "order_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OrderUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Order updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/orders/{order_id}/cancel": {
      "post": {
        "summary": "Cancel an order",
        "tags": ["Orders"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "order_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OrderCancelRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Order cancelled",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/orders/{order_id}/returns": {
      "post": {
        "summary": "Request a return for an order",
        "tags": ["Orders"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "order_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OrderReturnRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Return request created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderReturnResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/orders/admin/all": {
      "get": {
        "summary": "List all orders (Admin only)",
        "tags": ["Orders"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "All orders retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderListResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "UserRegister": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email"
          },
          "password": {
            "type": "string"
          },
          "first_name": {
            "type": "string"
          },
          "last_name": {
            "type": "string"
          },
          "phone": {
            "type": "string"
          },
          "avatar": {
            "type": "string"
          }
        },
        "required": ["email", "password", "first_name", "last_name"]
      },
      "UserLogin": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email"
          },
          "password": {
            "type": "string"
          }
        },
        "required": ["email", "password"]
      },
      "UserResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "first_name": {
            "type": "string"
          },
          "last_name": {
            "type": "string"
          },
          "phone": {
            "type": "string"
          },
          "avatar": {
            "type": "string"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": ["id", "email", "first_name", "last_name", "created_at"]
      },
      "LoginResponse": {
        "type": "object",
        "properties": {
          "access_token": {
            "type": "string"
          },
          "token_type": {
            "type": "string"
          },
          "user": {
            "$ref": "#/components/schemas/UserResponse"
          }
        },
        "required": ["access_token", "token_type", "user"]
      },
      "RegisterResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string"
          },
          "user": {
            "$ref": "#/components/schemas/UserResponse"
          }
        },
        "required": ["message", "user"]
      },
      "ProductCreate": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "price": {
            "type": "number"
          },
          "category": {
            "type": "string"
          },
          "categories": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": ["name", "description", "price"]
      },
      "ProductUpdate": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "price": {
            "type": "number"
          },
          "category": {
            "type": "string"
          },
          "categories": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "ProductResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "price": {
            "type": "number"
          },
          "category": {
            "type": "string"
          },
          "categories": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CategoryInfo"
            }
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "rating_avg": {
            "type": "number"
          },
          "rating_count": {
            "type": "integer"
          },
          "ratings_breakdown": {
            "type": "object"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": ["id", "name", "description", "price", "created_at", "updated_at"]
      },
      "CategoryInfo": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "slug": {
            "type": "string"
          }
        },
        "required": ["id", "name", "slug"]
      },
      "ProductCreateResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string"
          },
          "product": {
            "$ref": "#/components/schemas/ProductResponse"
          }
        },
        "required": ["message", "product"]
      },
      "ProductListResponse": {
        "type": "object",
        "properties": {
          "total": {
            "type": "integer"
          },
          "skip": {
            "type": "integer"
          },
          "limit": {
            "type": "integer"
          },
          "products": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProductResponse"
            }
          }
        },
        "required": ["total", "skip", "limit", "products"]
      },
      "ProductDeleteResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string"
          },
          "product_id": {
            "type": "string"
          }
        },
        "required": ["message", "product_id"]
      },
      "CategoryCreate": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "slug": {
            "type": "string"
          },
          "parent_id": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "metadata": {
            "type": "object"
          }
        },
        "required": ["name"]
      },
      "CategoryUpdate": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "slug": {
            "type": "string"
          },
          "parent_id": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "metadata": {
            "type": "object"
          }
        }
      },
      "CategoryOut": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "slug": {
            "type": "string"
          },
          "parent_id": {
            "type": "string",
            "nullable": true
          },
          "description": {
            "type": "string"
          },
          "metadata": {
            "type": "object"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": ["_id", "name", "slug", "created_at", "updated_at"]
      },
      "CategoryListOut": {
        "type": "object",
        "properties": {
          "total": {
            "type": "integer"
          },
          "skip": {
            "type": "integer"
          },
          "limit": {
            "type": "integer"
          },
          "categories": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CategoryOut"
            }
          }
        },
        "required": ["total", "skip", "limit", "categories"]
      },
      "ReviewCreate": {
        "type": "object",
        "properties": {
          "product": {
            "type": "string"
          },
          "rating": {
            "type": "integer",
            "minimum": 1,
            "maximum": 5
          },
          "title": {
            "type": "string"
          },
          "body": {
            "type": "string"
          }
        },
        "required": ["product", "rating", "title", "body"]
      },
      "ReviewUpdate": {
        "type": "object",
        "properties": {
          "rating": {
            "type": "integer",
            "minimum": 1,
            "maximum": 5
          },
          "title": {
            "type": "string"
          },
          "body": {
            "type": "string"
          }
        }
      },
      "ReviewResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "product_id": {
            "type": "string"
          },
          "user_id": {
            "type": "string"
          },
          "full_name": {
            "type": "string"
          },
          "rating": {
            "type": "integer"
          },
          "title": {
            "type": "string"
          },
          "body": {
            "type": "string"
          },
          "helpful_count": {
            "type": "integer"
          },
          "approved": {
            "type": "boolean"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": ["id", "product_id", "user_id", "rating", "title", "created_at", "updated_at"]
      },
      "ReviewListResponse": {
        "type": "object",
        "properties": {
          "meta": {
            "type": "object"
          },
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ReviewResponse"
            }
          },
          "count": {
            "type": "integer"
          }
        },
        "required": ["meta", "items", "count"]
      },
      "ReviewHelpfulRequest": {
        "type": "object",
        "properties": {
          "action": {
            "type": "string",
            "enum": ["increment", "decrement"],
            "default": "increment"
          }
        }
      },
      "FavoriteToggleRequest": {
        "type": "object",
        "properties": {
          "product": {
            "type": "string"
          }
        },
        "required": ["product"]
      },
      "FavoriteToggleResponse": {
        "type": "object",
        "properties": {
          "action": {
            "type": "string",
            "enum": ["added", "removed", "exists"]
          },
          "product_id": {
            "type": "string"
          },
          "favorite_id": {
            "type": "string"
          }
        },
        "required": ["action", "product_id"]
      },
      "FavoriteCheckResponse": {
        "type": "object",
        "properties": {
          "favorited": {
            "type": "boolean"
          }
        },
        "required": ["favorited"]
      },
      "FavoriteListResponse": {
        "type": "object",
        "properties": {
          "count": {
            "type": "integer"
          },
          "items": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "favorite_id": {
                  "type": "string"
                },
                "created_at": {
                  "type": "string",
                  "format": "date-time"
                },
                "product": {
                  "$ref": "#/components/schemas/ProductResponse"
                }
              },
              "required": ["favorite_id", "created_at", "product"]
            }
          }
        },
        "required": ["count", "items"]
      },
      "FavoriteRemoveResponse": {
        "type": "object",
        "properties": {
          "action": {
            "type": "string",
            "enum": ["removed"]
          },
          "favorite_id": {
            "type": "string"
          }
        },
        "required": ["action", "favorite_id"]
      },
      "CartItemCreate": {
        "type": "object",
        "properties": {
          "product": {
            "type": "string"
          },
          "variant_id": {
            "type": "string"
          },
          "quantity": {
            "type": "integer",
            "minimum": 1
          }
        },
        "required": ["product", "quantity"]
      },
      "CartItemUpdate": {
        "type": "object",
        "properties": {
          "product": {
            "type": "string"
          },
          "variant_id": {
            "type": "string"
          },
          "quantity": {
            "type": "integer",
            "minimum": 1
          }
        },
        "required": ["product", "quantity"]
      },
      "CartItemRemove": {
        "type": "object",
        "properties": {
          "product": {
            "type": "string"
          },
          "variant_id": {
            "type": "string"
          }
        },
        "required": ["product"]
      },
      "CartApplyCoupon": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string"
          }
        },
        "required": ["code"]
      },
      "CartItemOut": {
        "type": "object",
        "properties": {
          "product_id": {
            "type": "string"
          },
          "variant_id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "sku": {
            "type": "string"
          },
          "price": {
            "type": "number"
          },
          "quantity": {
            "type": "integer"
          },
          "item_total": {
            "type": "number"
          }
        },
        "required": ["product_id", "name", "price", "quantity", "item_total"]
      },
      "CartOut": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string"
          },
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CartItemOut"
            }
          },
          "subtotal": {
            "type": "number"
          },
          "discount": {
            "type": "number"
          },
          "tax": {
            "type": "number"
          },
          "delivery_fee": {
            "type": "number"
          },
          "total_amount": {
            "type": "number"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": ["user_id", "items", "subtotal", "discount", "tax", "delivery_fee", "total_amount", "updated_at", "created_at"]
      },
      "CartCheckResponse": {
        "type": "object",
        "properties": {
          "in_cart": {
            "type": "boolean"
          },
          "quantity": {
            "type": "integer"
          }
        },
        "required": ["in_cart"]
      },
      "OrderItem": {
        "type": "object",
        "properties": {
          "product_id": {
            "type": "string"
          },
          "product_name": {
            "type": "string"
          },
          "product_price": {
            "type": "number"
          },
          "quantity": {
            "type": "integer",
            "minimum": 1
          },
          "variant_id": {
            "type": "string"
          },
          "item_total": {
            "type": "number"
          }
        },
        "required": ["product_id", "product_name", "product_price", "quantity", "item_total"]
      },
      "ShippingAddress": {
        "type": "object",
        "properties": {
          "first_name": {
            "type": "string"
          },
          "last_name": {
            "type": "string"
          },
          "address_line1": {
            "type": "string"
          },
          "address_line2": {
            "type": "string"
          },
          "city": {
            "type": "string"
          },
          "state": {
            "type": "string"
          },
          "postal_code": {
            "type": "string"
          },
          "country": {
            "type": "string"
          },
          "phone": {
            "type": "string"
          }
        },
        "required": ["first_name", "last_name", "address_line1", "city", "state", "postal_code", "country"]
      },
      "OrderCreateRequest": {
        "type": "object",
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/OrderItem"
            }
          },
          "shipping_address": {
            "$ref": "#/components/schemas/ShippingAddress"
          },
          "payment_method": {
            "type": "string"
          },
          "notes": {
            "type": "string"
          }
        },
        "required": ["items", "shipping_address", "payment_method"]
      },
      "OrderUpdateRequest": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": ["pending", "confirmed", "processing", "shipped", "delivered", "cancelled", "returned"]
          },
          "tracking_number": {
            "type": "string"
          },
          "shipped_at": {
            "type": "string",
            "format": "date-time"
          },
          "delivered_at": {
            "type": "string",
            "format": "date-time"
          },
          "notes": {
            "type": "string"
          }
        }
      },
      "OrderResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "user_id": {
            "type": "string"
          },
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/OrderItem"
            }
          },
          "subtotal": {
            "type": "number"
          },
          "tax": {
            "type": "number"
          },
          "shipping_cost": {
            "type": "number"
          },
          "discount": {
            "type": "number"
          },
          "total_amount": {
            "type": "number"
          },
          "status": {
            "type": "string",
            "enum": ["pending", "confirmed", "processing", "shipped", "delivered", "cancelled", "returned"]
          },
          "shipping_address": {
            "$ref": "#/components/schemas/ShippingAddress"
          },
          "payment_method": {
            "type": "string"
          },
          "tracking_number": {
            "type": "string"
          },
          "shipped_at": {
            "type": "string",
            "format": "date-time"
          },
          "delivered_at": {
            "type": "string",
            "format": "date-time"
          },
          "notes": {
            "type": "string"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": ["id", "user_id", "items", "subtotal", "tax", "shipping_cost", "discount", "total_amount", "status", "shipping_address", "payment_method", "created_at", "updated_at"]
      },
      "OrderListResponse": {
        "type": "object",
        "properties": {
          "total": {
            "type": "integer"
          },
          "skip": {
            "type": "integer"
          },
          "limit": {
            "type": "integer"
          },
          "orders": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/OrderResponse"
            }
          }
        },
        "required": ["total", "skip", "limit", "orders"]
      },
      "OrderCancelRequest": {
        "type": "object",
        "properties": {
          "reason": {
            "type": "string"
          }
        },
        "required": ["reason"]
      },
      "OrderReturnRequest": {
        "type": "object",
        "properties": {
          "reason": {
            "type": "string"
          },
          "items": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "product_id": {
                  "type": "string"
                },
                "reason": {
                  "type": "string"
                }
              },
              "required": ["product_id", "reason"]
            }
          }
        },
        "required": ["reason", "items"]
      },
      "OrderReturnResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "order_id": {
            "type": "string"
          },
          "user_id": {
            "type": "string"
          },
          "items": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "product_id": {
                  "type": "string"
                },
                "reason": {
                  "type": "string"
                }
              },
              "required": ["product_id", "reason"]
            }
          },
          "reason": {
            "type": "string"
          },
          "status": {
            "type": "string"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": ["id", "order_id", "user_id", "items", "reason", "status", "created_at", "updated_at"]
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}